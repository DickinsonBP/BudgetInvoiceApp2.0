from PySide6.QtWidgets import QMainWindow, QPushButton, QHBoxLayout, QToolBar, QStatusBar, QMessageBox, QLabel, QVBoxLayout, QMdiArea
from PySide6.QtCore import QSize
from PySide6 import QtGui
from PySide6.QtGui import QAction, QIcon, QPixmap

from Windows.side_menu import SideMenu
from Windows.content import Content
from Windows.overlay import Overlay

class MdiArea(QMdiArea):
    def __init__(self):
        super(MdiArea,self).__init__()
        self.menu = SideMenu()
        self.content = Content(self)
        self.overlay = Overlay(self)

        self.addSubWindow(self.content)
        self.addSubWindow(self.overlay)
        self.addSubWindow(self.menu)

    def resizeEvent(self, event):
        self.content.resize(self.width(), self.height())
        self.overlay.resize(self.width(), self.height())
        self.menu.resize(270, self.height())


class MainWindow(QMainWindow):
    def __init__ (self, app):
        super().__init__()
        self.app = app      # declare an app member
        self.setWindowTitle("Generador de Presupuestos y Facturas")

        #window size        
        self.setGeometry(QtGui.QGuiApplication.primaryScreen().availableGeometry())

        self.mdi = MdiArea()
        self.setCentralWidget(self.mdi)

        
        ## Menu bar
        #menu_bar = self.menuBar()

        #file_menu = menu_bar.addMenu("File")
        #quit_action = menu_bar.addAction("Salir")
        #quit_action.triggered.connect(self.button_close)

    def quit_app(self):
        self.app.quit()

    def button_close(self):
        ret = QMessageBox.warning(self, "Salir", "Seguro que quieres salir?", QMessageBox.Ok | QMessageBox.Cancel)
        if (ret == QMessageBox.Ok):
            print("Quit app")
            self.quit_app()
        else:
            print("Choise Cancel. Continue execution")

    def button_budget(self):
        print("Presupuesto")
    
    def button_invoice(self):
        print("Factura")

    def button_clients(self):
        print("Clientes")
    
    def button_help(self):
        message = QMessageBox()
        message.setMinimumSize(700,200)
        message.setWindowTitle("Ayuda")
        message.setText("")
        message.setInformativeText("Necesitas Ayuda?")
        message.setIcon(QMessageBox.Information)
        message.setStandardButtons(QMessageBox.Ok | QMessageBox.Cancel)
        message.setDefaultButton(QMessageBox.Ok)

        ret = message.exec()
        if (ret == QMessageBox.Ok):
            print("Help")
            message = QMessageBox()
            message.setMinimumSize(700,200)
            message.setWindowTitle("Ayuda")
            message.setText("Ayuda!!")
            message.setInformativeText("Para usar la aplicacion debes ir al menu de arriba y usar los botones indicados en cada ventana.")
            message.setIcon(QMessageBox.Information)
            message.setStandardButtons(QMessageBox.Help)
            message.setDefaultButton(QMessageBox.Ok)

            #Show the message box
            ret2 = message.exec()
            if ret2 == QMessageBox.Ok : 
                print("User chose OK")
            else : 
                print ("User chose Cancel")
        else:
            print("No help")